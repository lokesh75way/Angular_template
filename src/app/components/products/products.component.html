<div class="products-container">
  <h1>Products Catalog</h1>
  <div *appLoading="isLoading()" class="loading">
    <p>Loading products...</p>
  </div>

  @if (!isLoading()) {
  <div class="products-grid">
    @for (product of products(); track product.id) {
    <div class="product-card">
      <img [src]="product.image" [alt]="product.name" class="product-image">
      <h3>{{ product.name }}</h3>
      <p class="category">{{ product.category }}</p>
      <p class="description">{{ product.description | truncate: 60 }}</p>
      <div class="product-meta">
        <span class="price">{{ product.price | currencyFormat }}</span>
        <span class="rating">‚≠ê {{ product.rating }}/5</span>
      </div>
      <p class="stock" [ngClass]="product.stock > 10 ? 'in-stock' : 'low-stock'">
        Stock: {{ product.stock }}
      </p>

      <div class="card-actions">
        @if (!isAdmin()){
          <button (click)="addToCart(product)" class="btn-add-cart">Add to Cart</button>
        } @else {
          <button (click)="editProduct(product)" class="btn-edit">Edit</button>
        }
      </div>
    </div>
    }
  </div>
  }
</div>